{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk="}},{"name":"@babel/runtime/helpers/defineProperty","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"X490zePjq+0IljAc8X0qcBg0iTo="}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":31,"index":46}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8="}},{"name":"./NavigationBuilderContext.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":47},"end":{"line":4,"column":73,"index":120}}],"key":"vvb+tbs8cGp9hlTxgL5PZCjRz5E="}},{"name":"./NavigationRouteContext.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":121},"end":{"line":5,"column":69,"index":190}}],"key":"AWXnpGNA5UkH1qQUM7hLv2L9KzI="}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.shouldPreventRemove = void 0;\n  exports.useOnPreventRemove = useOnPreventRemove;\n  var _defineProperty2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/defineProperty\"));\n  var React = _interopRequireWildcard(_$$_REQUIRE(_dependencyMap[2], \"react\"));\n  function _interopRequireWildcard(e, t) { if (\"function\" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) \"default\" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }\n  var VISITED_ROUTE_KEYS = Symbol('VISITED_ROUTE_KEYS');\n  var shouldPreventRemove = exports.shouldPreventRemove = function shouldPreventRemove(emitter, beforeRemoveListeners, currentRoutes, nextRoutes, action) {\n    var _action$VISITED_ROUTE;\n    var nextRouteKeys = nextRoutes.map(function (route) {\n      return route.key;\n    });\n\n    // Call these in reverse order so last screens handle the event first\n    var removedRoutes = currentRoutes.filter(function (route) {\n      return !nextRouteKeys.includes(route.key);\n    }).reverse();\n    var visitedRouteKeys = // @ts-expect-error: add this property to mark that we've already emitted this action\n    (_action$VISITED_ROUTE = action[VISITED_ROUTE_KEYS]) != null ? _action$VISITED_ROUTE : new Set();\n    var beforeRemoveAction = Object.assign({}, action, (0, _defineProperty2.default)({}, VISITED_ROUTE_KEYS, visitedRouteKeys));\n    for (var route of removedRoutes) {\n      var _beforeRemoveListener;\n      if (visitedRouteKeys.has(route.key)) {\n        // Skip if we've already emitted this action for this screen\n        continue;\n      }\n\n      // First, we need to check if any child screens want to prevent it\n      var isPrevented = (_beforeRemoveListener = beforeRemoveListeners[route.key]) == null ? void 0 : _beforeRemoveListener.call(beforeRemoveListeners, beforeRemoveAction);\n      if (isPrevented) {\n        return true;\n      }\n      visitedRouteKeys.add(route.key);\n      var event = emitter.emit({\n        type: 'beforeRemove',\n        target: route.key,\n        data: {\n          action: beforeRemoveAction\n        },\n        canPreventDefault: true\n      });\n      if (event.defaultPrevented) {\n        return true;\n      }\n    }\n    return false;\n  };\n  function useOnPreventRemove(_ref) {\n    var getState = _ref.getState,\n      emitter = _ref.emitter,\n      beforeRemoveListeners = _ref.beforeRemoveListeners;\n    var _React$useContext = React.useContext(_$$_REQUIRE(_dependencyMap[3], \"./NavigationBuilderContext.js\").NavigationBuilderContext),\n      addKeyedListener = _React$useContext.addKeyedListener;\n    var route = React.useContext(_$$_REQUIRE(_dependencyMap[4], \"./NavigationRouteContext.js\").NavigationRouteContext);\n    var routeKey = route == null ? void 0 : route.key;\n    React.useEffect(function () {\n      if (routeKey) {\n        return addKeyedListener == null ? void 0 : addKeyedListener('beforeRemove', routeKey, function (action) {\n          var state = getState();\n          return shouldPreventRemove(emitter, beforeRemoveListeners, state.routes, [], action);\n        });\n      }\n    }, [addKeyedListener, beforeRemoveListeners, emitter, getState, routeKey]);\n  }\n});","lineCount":71,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13],[4,6,1,13,"_interopRequireDefault"],[4,28,1,13],[4,31,1,13,"_$$_REQUIRE"],[4,42,1,13],[4,43,1,13,"_dependencyMap"],[4,57,1,13],[5,2,1,13,"Object"],[5,8,1,13],[5,9,1,13,"defineProperty"],[5,23,1,13],[5,24,1,13,"exports"],[5,31,1,13],[6,4,1,13,"value"],[6,9,1,13],[7,2,1,13],[8,2,1,13,"exports"],[8,9,1,13],[8,10,1,13,"shouldPreventRemove"],[8,29,1,13],[9,2,1,13,"exports"],[9,9,1,13],[9,10,1,13,"useOnPreventRemove"],[9,28,1,13],[9,31,1,13,"useOnPreventRemove"],[9,49,1,13],[10,2,1,13],[10,6,1,13,"_defineProperty2"],[10,22,1,13],[10,25,1,13,"_interopRequireDefault"],[10,47,1,13],[10,48,1,13,"_$$_REQUIRE"],[10,59,1,13],[10,60,1,13,"_dependencyMap"],[10,74,1,13],[11,2,3,0],[11,6,3,0,"React"],[11,11,3,0],[11,14,3,0,"_interopRequireWildcard"],[11,37,3,0],[11,38,3,0,"_$$_REQUIRE"],[11,49,3,0],[11,50,3,0,"_dependencyMap"],[11,64,3,0],[12,2,3,31],[12,11,3,31,"_interopRequireWildcard"],[12,35,3,31,"e"],[12,36,3,31],[12,38,3,31,"t"],[12,39,3,31],[12,68,3,31,"WeakMap"],[12,75,3,31],[12,81,3,31,"r"],[12,82,3,31],[12,89,3,31,"WeakMap"],[12,96,3,31],[12,100,3,31,"n"],[12,101,3,31],[12,108,3,31,"WeakMap"],[12,115,3,31],[12,127,3,31,"_interopRequireWildcard"],[12,150,3,31],[12,162,3,31,"_interopRequireWildcard"],[12,186,3,31,"e"],[12,187,3,31],[12,189,3,31,"t"],[12,190,3,31],[12,199,3,31,"t"],[12,200,3,31],[12,204,3,31,"e"],[12,205,3,31],[12,209,3,31,"e"],[12,210,3,31],[12,211,3,31,"__esModule"],[12,221,3,31],[12,230,3,31,"e"],[12,231,3,31],[12,237,3,31,"o"],[12,238,3,31],[12,240,3,31,"i"],[12,241,3,31],[12,243,3,31,"f"],[12,244,3,31],[12,249,3,31,"__proto__"],[12,258,3,31],[12,266,3,31,"default"],[12,273,3,31],[12,275,3,31,"e"],[12,276,3,31],[12,293,3,31,"e"],[12,294,3,31],[12,317,3,31,"e"],[12,318,3,31],[12,343,3,31,"e"],[12,344,3,31],[12,353,3,31,"f"],[12,354,3,31],[12,360,3,31,"o"],[12,361,3,31],[12,364,3,31,"t"],[12,365,3,31],[12,368,3,31,"n"],[12,369,3,31],[12,372,3,31,"r"],[12,373,3,31],[12,381,3,31,"o"],[12,382,3,31],[12,383,3,31,"has"],[12,386,3,31],[12,387,3,31,"e"],[12,388,3,31],[12,398,3,31,"o"],[12,399,3,31],[12,400,3,31,"get"],[12,403,3,31],[12,404,3,31,"e"],[12,405,3,31],[12,408,3,31,"o"],[12,409,3,31],[12,410,3,31,"set"],[12,413,3,31],[12,414,3,31,"e"],[12,415,3,31],[12,417,3,31,"f"],[12,418,3,31],[12,432,3,31,"_t"],[12,434,3,31],[12,438,3,31,"e"],[12,439,3,31],[12,455,3,31,"_t"],[12,457,3,31],[12,464,3,31,"hasOwnProperty"],[12,478,3,31],[12,479,3,31,"call"],[12,483,3,31],[12,484,3,31,"e"],[12,485,3,31],[12,487,3,31,"_t"],[12,489,3,31],[12,496,3,31,"i"],[12,497,3,31],[12,501,3,31,"o"],[12,502,3,31],[12,505,3,31,"Object"],[12,511,3,31],[12,512,3,31,"defineProperty"],[12,526,3,31],[12,531,3,31,"Object"],[12,537,3,31],[12,538,3,31,"getOwnPropertyDescriptor"],[12,562,3,31],[12,563,3,31,"e"],[12,564,3,31],[12,566,3,31,"_t"],[12,568,3,31],[12,575,3,31,"i"],[12,576,3,31],[12,577,3,31,"get"],[12,580,3,31],[12,584,3,31,"i"],[12,585,3,31],[12,586,3,31,"set"],[12,589,3,31],[12,593,3,31,"o"],[12,594,3,31],[12,595,3,31,"f"],[12,596,3,31],[12,598,3,31,"_t"],[12,600,3,31],[12,602,3,31,"i"],[12,603,3,31],[12,607,3,31,"f"],[12,608,3,31],[12,609,3,31,"_t"],[12,611,3,31],[12,615,3,31,"e"],[12,616,3,31],[12,617,3,31,"_t"],[12,619,3,31],[12,630,3,31,"f"],[12,631,3,31],[12,636,3,31,"e"],[12,637,3,31],[12,639,3,31,"t"],[12,640,3,31],[13,2,6,0],[13,6,6,6,"VISITED_ROUTE_KEYS"],[13,24,6,24],[13,27,6,27,"Symbol"],[13,33,6,33],[13,34,6,34],[13,54,6,54],[13,55,6,55],[14,2,7,7],[14,6,7,13,"shouldPreventRemove"],[14,25,7,32],[14,28,7,32,"exports"],[14,35,7,32],[14,36,7,32,"shouldPreventRemove"],[14,55,7,32],[14,58,7,35],[14,67,7,13,"shouldPreventRemove"],[14,86,7,32,"shouldPreventRemove"],[14,87,7,36,"emitter"],[14,94,7,43],[14,96,7,45,"beforeRemoveListeners"],[14,117,7,66],[14,119,7,68,"currentRoutes"],[14,132,7,81],[14,134,7,83,"nextRoutes"],[14,144,7,93],[14,146,7,95,"action"],[14,152,7,101],[14,154,7,106],[15,4,7,106],[15,8,7,106,"_action$VISITED_ROUTE"],[15,29,7,106],[16,4,8,2],[16,8,8,8,"nextRouteKeys"],[16,21,8,21],[16,24,8,24,"nextRoutes"],[16,34,8,34],[16,35,8,35,"map"],[16,38,8,38],[16,39,8,39],[16,49,8,39,"route"],[16,54,8,44],[17,6,8,44],[17,13,8,48,"route"],[17,18,8,53],[17,19,8,54,"key"],[17,22,8,57],[18,4,8,57],[18,6,8,58],[20,4,10,2],[21,4,11,2],[21,8,11,8,"removedRoutes"],[21,21,11,21],[21,24,11,24,"currentRoutes"],[21,37,11,37],[21,38,11,38,"filter"],[21,44,11,44],[21,45,11,45],[21,55,11,45,"route"],[21,60,11,50],[22,6,11,50],[22,13,11,54],[22,14,11,55,"nextRouteKeys"],[22,27,11,68],[22,28,11,69,"includes"],[22,36,11,77],[22,37,11,78,"route"],[22,42,11,83],[22,43,11,84,"key"],[22,46,11,87],[22,47,11,88],[23,4,11,88],[23,6,11,89],[23,7,11,90,"reverse"],[23,14,11,97],[23,15,11,98],[23,16,11,99],[24,4,12,2],[24,8,12,8,"visitedRouteKeys"],[24,24,12,24],[24,27,13,2],[25,4,13,2],[25,5,13,2,"_action$VISITED_ROUTE"],[25,26,13,2],[25,29,14,2,"action"],[25,35,14,8],[25,36,14,9,"VISITED_ROUTE_KEYS"],[25,54,14,27],[25,55,14,28],[25,67,14,28,"_action$VISITED_ROUTE"],[25,88,14,28],[25,91,14,32],[25,95,14,36,"Set"],[25,98,14,39],[25,99,14,40],[25,100,14,41],[26,4,15,2],[26,8,15,8,"beforeRemoveAction"],[26,26,15,26],[26,29,15,26,"Object"],[26,35,15,26],[26,36,15,26,"assign"],[26,42,15,26],[26,47,16,7,"action"],[26,53,16,13],[26,59,16,13,"_defineProperty2"],[26,75,16,13],[26,76,16,13,"default"],[26,83,16,13],[26,89,17,5,"VISITED_ROUTE_KEYS"],[26,107,17,23],[26,109,17,26,"visitedRouteKeys"],[26,125,17,42],[26,127,18,3],[27,4,19,2],[27,9,19,7],[27,13,19,13,"route"],[27,18,19,18],[27,22,19,22,"removedRoutes"],[27,35,19,35],[27,37,19,37],[28,6,19,37],[28,10,19,37,"_beforeRemoveListener"],[28,31,19,37],[29,6,20,4],[29,10,20,8,"visitedRouteKeys"],[29,26,20,24],[29,27,20,25,"has"],[29,30,20,28],[29,31,20,29,"route"],[29,36,20,34],[29,37,20,35,"key"],[29,40,20,38],[29,41,20,39],[29,43,20,41],[30,8,21,6],[31,8,22,6],[32,6,23,4],[34,6,25,4],[35,6,26,4],[35,10,26,10,"isPrevented"],[35,21,26,21],[35,25,26,21,"_beforeRemoveListener"],[35,46,26,21],[35,49,26,24,"beforeRemoveListeners"],[35,70,26,45],[35,71,26,46,"route"],[35,76,26,51],[35,77,26,52,"key"],[35,80,26,55],[35,81,26,56],[35,102,26,24,"_beforeRemoveListener"],[35,123,26,24],[35,124,26,24,"call"],[35,128,26,24],[35,129,26,24,"beforeRemoveListeners"],[35,150,26,45],[35,152,26,59,"beforeRemoveAction"],[35,170,26,77],[35,171,26,78],[36,6,27,4],[36,10,27,8,"isPrevented"],[36,21,27,19],[36,23,27,21],[37,8,28,6],[37,15,28,13],[37,19,28,17],[38,6,29,4],[39,6,30,4,"visitedRouteKeys"],[39,22,30,20],[39,23,30,21,"add"],[39,26,30,24],[39,27,30,25,"route"],[39,32,30,30],[39,33,30,31,"key"],[39,36,30,34],[39,37,30,35],[40,6,31,4],[40,10,31,10,"event"],[40,15,31,15],[40,18,31,18,"emitter"],[40,25,31,25],[40,26,31,26,"emit"],[40,30,31,30],[40,31,31,31],[41,8,32,6,"type"],[41,12,32,10],[41,14,32,12],[41,28,32,26],[42,8,33,6,"target"],[42,14,33,12],[42,16,33,14,"route"],[42,21,33,19],[42,22,33,20,"key"],[42,25,33,23],[43,8,34,6,"data"],[43,12,34,10],[43,14,34,12],[44,10,35,8,"action"],[44,16,35,14],[44,18,35,16,"beforeRemoveAction"],[45,8,36,6],[45,9,36,7],[46,8,37,6,"canPreventDefault"],[46,25,37,23],[46,27,37,25],[47,6,38,4],[47,7,38,5],[47,8,38,6],[48,6,39,4],[48,10,39,8,"event"],[48,15,39,13],[48,16,39,14,"defaultPrevented"],[48,32,39,30],[48,34,39,32],[49,8,40,6],[49,15,40,13],[49,19,40,17],[50,6,41,4],[51,4,42,2],[52,4,43,2],[52,11,43,9],[52,16,43,14],[53,2,44,0],[53,3,44,1],[54,2,45,7],[54,11,45,16,"useOnPreventRemove"],[54,29,45,34,"useOnPreventRemove"],[54,30,45,34,"_ref"],[54,34,45,34],[54,36,49,3],[55,4,49,3],[55,8,46,2,"getState"],[55,16,46,10],[55,19,46,10,"_ref"],[55,23,46,10],[55,24,46,2,"getState"],[55,32,46,10],[56,6,47,2,"emitter"],[56,13,47,9],[56,16,47,9,"_ref"],[56,20,47,9],[56,21,47,2,"emitter"],[56,28,47,9],[57,6,48,2,"beforeRemoveListeners"],[57,27,48,23],[57,30,48,23,"_ref"],[57,34,48,23],[57,35,48,2,"beforeRemoveListeners"],[57,56,48,23],[58,4,50,2],[58,8,50,2,"_React$useContext"],[58,25,50,2],[58,28,52,6,"React"],[58,33,52,11],[58,34,52,12,"useContext"],[58,44,52,22],[58,45,52,23,"NavigationBuilderContext"],[58,75,52,23],[58,76,52,23,"NavigationBuilderContext"],[58,133,52,47],[58,134,52,48],[59,6,51,4,"addKeyedListener"],[59,22,51,20],[59,25,51,20,"_React$useContext"],[59,42,51,20],[59,43,51,4,"addKeyedListener"],[59,59,51,20],[60,4,53,2],[60,8,53,8,"route"],[60,13,53,13],[60,16,53,16,"React"],[60,21,53,21],[60,22,53,22,"useContext"],[60,32,53,32],[60,33,53,33,"NavigationRouteContext"],[60,63,53,33],[60,64,53,33,"NavigationRouteContext"],[60,117,53,55],[60,118,53,56],[61,4,54,2],[61,8,54,8,"routeKey"],[61,16,54,16],[61,19,54,19,"route"],[61,24,54,24],[61,44,54,19,"route"],[61,49,54,24],[61,50,54,26,"key"],[61,53,54,29],[62,4,55,2,"React"],[62,9,55,7],[62,10,55,8,"useEffect"],[62,19,55,17],[62,20,55,18],[62,32,55,24],[63,6,56,4],[63,10,56,8,"routeKey"],[63,18,56,16],[63,20,56,18],[64,8,57,6],[64,15,57,13,"addKeyedListener"],[64,31,57,29],[64,51,57,13,"addKeyedListener"],[64,67,57,29],[64,68,57,32],[64,82,57,46],[64,84,57,48,"routeKey"],[64,92,57,56],[64,94,57,58],[64,104,57,58,"action"],[64,110,57,64],[64,112,57,68],[65,10,58,8],[65,14,58,14,"state"],[65,19,58,19],[65,22,58,22,"getState"],[65,30,58,30],[65,31,58,31],[65,32,58,32],[66,10,59,8],[66,17,59,15,"shouldPreventRemove"],[66,36,59,34],[66,37,59,35,"emitter"],[66,44,59,42],[66,46,59,44,"beforeRemoveListeners"],[66,67,59,65],[66,69,59,67,"state"],[66,74,59,72],[66,75,59,73,"routes"],[66,81,59,79],[66,83,59,81],[66,85,59,83],[66,87,59,85,"action"],[66,93,59,91],[66,94,59,92],[67,8,60,6],[67,9,60,7],[67,10,60,8],[68,6,61,4],[69,4,62,2],[69,5,62,3],[69,7,62,5],[69,8,62,6,"addKeyedListener"],[69,24,62,22],[69,26,62,24,"beforeRemoveListeners"],[69,47,62,45],[69,49,62,47,"emitter"],[69,56,62,54],[69,58,62,56,"getState"],[69,66,62,64],[69,68,62,66,"routeKey"],[69,76,62,74],[69,77,62,75],[69,78,62,76],[70,2,63,0],[71,0,63,1],[71,3]],"functionMap":{"names":["<global>","shouldPreventRemove","nextRoutes.map$argument_0","currentRoutes.filter$argument_0","useOnPreventRemove","React.useEffect$argument_0","addKeyedListener$argument_2"],"mappings":"AAA;mCCM;uCCC,kBD;6CEG,2CF;CDiC;OIC;kBCU;0DCE;ODG;GDE;CJC"}},"type":"js/module"}]}