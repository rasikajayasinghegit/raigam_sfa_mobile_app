{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk="}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo="}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":40,"index":40}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g="}},{"name":"../config/appConfig","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":41},"end":{"line":2,"column":95,"index":136}},{"start":{"line":2,"column":0,"index":41},"end":{"line":2,"column":95,"index":136}},{"start":{"line":2,"column":0,"index":41},"end":{"line":2,"column":95,"index":136}}],"key":"D1tKt2GxUEikrexdpSWjXQGIHNw="}},{"name":"../utils/semver","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":137},"end":{"line":3,"column":48,"index":185}}],"key":"yt9Da3MG+QnztEL1/KSwp6laVGs=","isOptional":true}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.checkVersion = checkVersion;\n  var _asyncToGenerator2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/asyncToGenerator\"));\n  var _reactNative = _$$_REQUIRE(_dependencyMap[2], \"react-native\");\n  function normalizePayload(raw) {\n    var _raw$ios, _raw$android, _platformEntry$versio, _platformEntry$versio2;\n    // Supports flat shape { version, mandatory, updateUrl } and platform-specific shape { android: { versionName, url, mandatory }, ios: { ... } }\n    if ('version' in raw) {\n      return {\n        version: raw.version,\n        mandatory: raw.mandatory,\n        updateUrl: raw.updateUrl,\n        message: raw.message\n      };\n    }\n    var platformEntry = _reactNative.Platform.OS === 'ios' ? (_raw$ios = raw.ios) != null ? _raw$ios : raw.android // fall back to android if ios missing\n    : (_raw$android = raw.android) != null ? _raw$android : raw.ios;\n    if (!platformEntry) {\n      return null;\n    }\n    return {\n      version: (_platformEntry$versio = platformEntry.versionName) != null ? _platformEntry$versio : String((_platformEntry$versio2 = platformEntry.versionCode) != null ? _platformEntry$versio2 : ''),\n      mandatory: platformEntry.mandatory,\n      updateUrl: platformEntry.url,\n      message: platformEntry.message\n    };\n  }\n  function checkVersion() {\n    return _checkVersion.apply(this, arguments);\n  }\n  function _checkVersion() {\n    _checkVersion = (0, _asyncToGenerator2.default)(function* () {\n      var controller = new AbortController();\n      var timeout = setTimeout(function () {\n        return controller.abort();\n      }, _$$_REQUIRE(_dependencyMap[3], \"../config/appConfig\").VERSION_CHECK_TIMEOUT_MS);\n      try {\n        var response = yield fetch(_$$_REQUIRE(_dependencyMap[3], \"../config/appConfig\").VERSION_CHECK_URL, {\n          signal: controller.signal\n        });\n        if (!response.ok) {\n          throw new Error(`Version check failed with status ${response.status}`);\n        }\n        var json = yield response.json();\n        var normalized = normalizePayload(json);\n        if (!normalized || !normalized.version) {\n          throw new Error('Version check response missing version');\n        }\n        var latest = normalized.version;\n        var mandatory = Boolean(normalized.mandatory);\n        var isOutdated = (0, _$$_REQUIRE(_dependencyMap[4], \"../utils/semver\").compareSemver)(latest, _$$_REQUIRE(_dependencyMap[3], \"../config/appConfig\").APP_VERSION) === 1;\n        if (isOutdated && mandatory) {\n          return {\n            status: 'outdated',\n            payload: normalized\n          };\n        }\n        return {\n          status: 'ok',\n          payload: normalized\n        };\n      } catch (error) {\n        return {\n          status: 'error',\n          error: error\n        };\n      } finally {\n        clearTimeout(timeout);\n      }\n    });\n    return _checkVersion.apply(this, arguments);\n  }\n});","lineCount":77,"map":[[8,2,1,0],[8,6,1,0,"_reactNative"],[8,18,1,0],[8,21,1,0,"_$$_REQUIRE"],[8,32,1,0],[8,33,1,0,"_dependencyMap"],[8,47,1,0],[9,2,37,0],[9,11,37,9,"normalizePayload"],[9,27,37,25,"normalizePayload"],[9,28,37,26,"raw"],[9,31,37,46],[9,33,37,75],[10,4,37,75],[10,8,37,75,"_raw$ios"],[10,16,37,75],[10,18,37,75,"_raw$android"],[10,30,37,75],[10,32,37,75,"_platformEntry$versio"],[10,53,37,75],[10,55,37,75,"_platformEntry$versio2"],[10,77,37,75],[11,4,38,2],[12,4,39,2],[12,8,39,6],[12,17,39,15],[12,21,39,19,"raw"],[12,24,39,22],[12,26,39,24],[13,6,40,4],[13,13,40,11],[14,8,41,6,"version"],[14,15,41,13],[14,17,41,15,"raw"],[14,20,41,18],[14,21,41,19,"version"],[14,28,41,26],[15,8,42,6,"mandatory"],[15,17,42,15],[15,19,42,17,"raw"],[15,22,42,20],[15,23,42,21,"mandatory"],[15,32,42,30],[16,8,43,6,"updateUrl"],[16,17,43,15],[16,19,43,17,"raw"],[16,22,43,20],[16,23,43,21,"updateUrl"],[16,32,43,30],[17,8,44,6,"message"],[17,15,44,13],[17,17,44,15,"raw"],[17,20,44,18],[17,21,44,19,"message"],[18,6,45,4],[18,7,45,5],[19,4,46,2],[20,4,48,2],[20,8,48,8,"platformEntry"],[20,21,48,21],[20,24,49,4,"Platform"],[20,45,49,12],[20,46,49,13,"OS"],[20,48,49,15],[20,53,49,20],[20,58,49,25],[20,62,49,25,"_raw$ios"],[20,70,49,25],[20,73,50,8,"raw"],[20,76,50,11],[20,77,50,12,"ios"],[20,80,50,15],[20,92,50,15,"_raw$ios"],[20,100,50,15],[20,103,50,19,"raw"],[20,106,50,22],[20,107,50,23,"android"],[20,114,50,30],[20,115,50,31],[21,4,50,31],[21,7,50,31,"_raw$android"],[21,19,50,31],[21,22,51,8,"raw"],[21,25,51,11],[21,26,51,12,"android"],[21,33,51,19],[21,45,51,19,"_raw$android"],[21,57,51,19],[21,60,51,23,"raw"],[21,63,51,26],[21,64,51,27,"ios"],[21,67,51,30],[22,4,53,2],[22,8,53,6],[22,9,53,7,"platformEntry"],[22,22,53,20],[22,24,53,22],[23,6,54,4],[23,13,54,11],[23,17,54,15],[24,4,55,2],[25,4,57,2],[25,11,57,9],[26,6,58,4,"version"],[26,13,58,11],[26,16,58,11,"_platformEntry$versio"],[26,37,58,11],[26,40,58,13,"platformEntry"],[26,53,58,26],[26,54,58,27,"versionName"],[26,65,58,38],[26,77,58,38,"_platformEntry$versio"],[26,98,58,38],[26,101,58,42,"String"],[26,107,58,48],[26,109,58,48,"_platformEntry$versio2"],[26,131,58,48],[26,134,58,49,"platformEntry"],[26,147,58,62],[26,148,58,63,"versionCode"],[26,159,58,74],[26,171,58,74,"_platformEntry$versio2"],[26,193,58,74],[26,196,58,78],[26,198,58,80],[26,199,58,81],[27,6,59,4,"mandatory"],[27,15,59,13],[27,17,59,15,"platformEntry"],[27,30,59,28],[27,31,59,29,"mandatory"],[27,40,59,38],[28,6,60,4,"updateUrl"],[28,15,60,13],[28,17,60,15,"platformEntry"],[28,30,60,28],[28,31,60,29,"url"],[28,34,60,32],[29,6,61,4,"message"],[29,13,61,11],[29,15,61,13,"platformEntry"],[29,28,61,26],[29,29,61,27,"message"],[30,4,62,2],[30,5,62,3],[31,2,63,0],[32,2,63,1],[32,11,65,22,"checkVersion"],[32,23,65,34,"checkVersion"],[32,24,65,34],[33,4,65,34],[33,11,65,34,"_checkVersion"],[33,24,65,34],[33,25,65,34,"apply"],[33,30,65,34],[33,37,65,34,"arguments"],[33,46,65,34],[34,2,65,34],[35,2,65,34],[35,11,65,34,"_checkVersion"],[35,25,65,34],[36,4,65,34,"_checkVersion"],[36,17,65,34],[36,24,65,34,"_asyncToGenerator2"],[36,42,65,34],[36,43,65,34,"default"],[36,50,65,34],[36,52,65,7],[36,65,65,67],[37,6,66,2],[37,10,66,8,"controller"],[37,20,66,18],[37,23,66,21],[37,27,66,25,"AbortController"],[37,42,66,40],[37,43,66,41],[37,44,66,42],[38,6,67,2],[38,10,67,8,"timeout"],[38,17,67,15],[38,20,67,18,"setTimeout"],[38,30,67,28],[38,31,67,29],[39,8,67,29],[39,15,67,35,"controller"],[39,25,67,45],[39,26,67,46,"abort"],[39,31,67,51],[39,32,67,52],[39,33,67,53],[40,6,67,53],[40,9,67,55,"VERSION_CHECK_TIMEOUT_MS"],[40,39,67,55],[40,40,67,55,"VERSION_CHECK_TIMEOUT_MS"],[40,87,67,79],[40,88,67,80],[41,6,69,2],[41,10,69,6],[42,8,70,4],[42,12,70,10,"response"],[42,20,70,18],[42,29,70,27,"fetch"],[42,34,70,32],[42,35,70,33,"VERSION_CHECK_URL"],[42,65,70,33],[42,66,70,33,"VERSION_CHECK_URL"],[42,106,70,50],[42,108,70,52],[43,10,70,54,"signal"],[43,16,70,60],[43,18,70,62,"controller"],[43,28,70,72],[43,29,70,73,"signal"],[44,8,70,80],[44,9,70,81],[44,10,70,82],[45,8,71,4],[45,12,71,8],[45,13,71,9,"response"],[45,21,71,17],[45,22,71,18,"ok"],[45,24,71,20],[45,26,71,22],[46,10,72,6],[46,16,72,12],[46,20,72,16,"Error"],[46,25,72,21],[46,26,72,22],[46,62,72,58,"response"],[46,70,72,66],[46,71,72,67,"status"],[46,77,72,73],[46,79,72,75],[46,80,72,76],[47,8,73,4],[48,8,74,4],[48,12,74,10,"json"],[48,16,74,14],[48,25,74,24,"response"],[48,33,74,32],[48,34,74,33,"json"],[48,38,74,37],[48,39,74,38],[48,40,74,59],[49,8,75,4],[49,12,75,10,"normalized"],[49,22,75,20],[49,25,75,23,"normalizePayload"],[49,41,75,39],[49,42,75,40,"json"],[49,46,75,44],[49,47,75,45],[50,8,76,4],[50,12,76,8],[50,13,76,9,"normalized"],[50,23,76,19],[50,27,76,23],[50,28,76,24,"normalized"],[50,38,76,34],[50,39,76,35,"version"],[50,46,76,42],[50,48,76,44],[51,10,77,6],[51,16,77,12],[51,20,77,16,"Error"],[51,25,77,21],[51,26,77,22],[51,66,77,62],[51,67,77,63],[52,8,78,4],[53,8,80,4],[53,12,80,10,"latest"],[53,18,80,16],[53,21,80,19,"normalized"],[53,31,80,29],[53,32,80,30,"version"],[53,39,80,37],[54,8,81,4],[54,12,81,10,"mandatory"],[54,21,81,19],[54,24,81,22,"Boolean"],[54,31,81,29],[54,32,81,30,"normalized"],[54,42,81,40],[54,43,81,41,"mandatory"],[54,52,81,50],[54,53,81,51],[55,8,82,4],[55,12,82,10,"isOutdated"],[55,22,82,20],[55,25,82,23],[55,29,82,23,"compareSemver"],[55,59,82,23],[55,60,82,23,"compareSemver"],[55,92,82,36],[55,94,82,37,"latest"],[55,100,82,43],[55,102,82,45,"APP_VERSION"],[55,132,82,45],[55,133,82,45,"APP_VERSION"],[55,167,82,56],[55,168,82,57],[55,173,82,62],[55,174,82,63],[56,8,84,4],[56,12,84,8,"isOutdated"],[56,22,84,18],[56,26,84,22,"mandatory"],[56,35,84,31],[56,37,84,33],[57,10,85,6],[57,17,85,13],[58,12,85,15,"status"],[58,18,85,21],[58,20,85,23],[58,30,85,33],[59,12,85,35,"payload"],[59,19,85,42],[59,21,85,44,"normalized"],[60,10,85,55],[60,11,85,56],[61,8,86,4],[62,8,87,4],[62,15,87,11],[63,10,87,13,"status"],[63,16,87,19],[63,18,87,21],[63,22,87,25],[64,10,87,27,"payload"],[64,17,87,34],[64,19,87,36,"normalized"],[65,8,87,47],[65,9,87,48],[66,6,88,2],[66,7,88,3],[66,8,88,4],[66,15,88,11,"error"],[66,20,88,21],[66,22,88,23],[67,8,89,4],[67,15,89,11],[68,10,89,13,"status"],[68,16,89,19],[68,18,89,21],[68,25,89,28],[69,10,89,30,"error"],[69,15,89,35],[69,17,89,30,"error"],[70,8,89,36],[70,9,89,37],[71,6,90,2],[71,7,90,3],[71,16,90,12],[72,8,91,4,"clearTimeout"],[72,20,91,16],[72,21,91,17,"timeout"],[72,28,91,24],[72,29,91,25],[73,6,92,2],[74,4,93,0],[74,5,93,1],[75,4,93,1],[75,11,93,1,"_checkVersion"],[75,24,93,1],[75,25,93,1,"apply"],[75,30,93,1],[75,37,93,1,"arguments"],[75,46,93,1],[76,2,93,1],[77,0,93,1],[77,3]],"functionMap":{"names":["<global>","normalizePayload","checkVersion","setTimeout$argument_0"],"mappings":"AAA;ACoC;CD0B;OEE;6BCE,wBD;CF0B"}},"type":"js/module"}]}